<html>
  <meta charset="utf-8" />
  <style>
    ul {
      list-style-type: none;
    }
  </style>

  <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"
  ></script>

  <body>
    <h1>List of items</h1>
    <form action="#">
      <div id="Aurelie">
        <h2>Aurelie</h2>
        <ul></ul>
      </div>
      <div id="Alice">
        <h2>Alice</h2>
        <ul></ul>
      </div>
      <div id="Romain">
        <h2>Romain</h2>
        <ul></ul>
      </div>
      <div>
        <button id="reset">Reset</button>
      </div>
    </form>
  </body>

  <script>
    const LOCAL_STORAGE_DATA_KEY = "selectedItems";

    function getSelectedItems() {
      const myStorage = window.localStorage;
      const selectedItems = JSON.parse(
        localStorage.getItem(LOCAL_STORAGE_DATA_KEY)
      );
      return selectedItems;
    }

    function setSelectedItems(items) {
      const myStorage = window.localStorage;
      localStorage.setItem(LOCAL_STORAGE_DATA_KEY, JSON.stringify(items));
    }

    function refreshItems() {
      const items = getSelectedItems();
      $("[data-id]").prop("checked", false);
      if (!!items) {
        for (const item of items) {
          $(`[data-id="${item}"]`).prop("checked", true);
        }
      }
    }

    function resetItems(event) {
      localStorage.removeItem(LOCAL_STORAGE_DATA_KEY);
    }

    function generateLists(itemsToDisplay) {
      const keys = Object.keys(itemsToDisplay);

      for (var i = 0; i < keys.length; i++) {
        const category = keys[i];
        const categoryList = itemsToDisplay[category];
        for (var j = 0; j < categoryList.length; j++) {
          const label = categoryList[j];
          $(`div#${category} ul`).append(
            `<li><input type="checkbox" data-id="${label}">${label}</input></li>`
          );
        }
      }
    }

    $(document).ready(function() {
      generateLists(ITEMS_TO_DISPLAY);

      refreshItems();

      $("li input").change(function(event) {
        const selectedItems = [];
        $("li input:checked").each(function() {
          selectedItems.push($(this).attr("data-id"));
        });
        setSelectedItems(selectedItems);
      });

      $("#reset").click(function(event) {
        event.preventDefault();

        const isSure = confirm("Are you sure?");
        if (isSure == true) {
          resetItems();
          refreshItems();
        }
      });
    });

    const ITEMS_TO_DISPLAY = {
      Aurelie: ["Makeup"],
      Alice: ["Nappies"],
      Romain: ["Switch"]
    };
  </script>
</html>
